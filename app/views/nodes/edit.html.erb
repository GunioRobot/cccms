<h1>Nodes#edit</h1>

<h1>Editing page</h1>

<% form_for(@node) do |f| %>
  <%= f.error_messages %>

  <% if draft = @node.find_or_create_draft( User.first ) %>
  
  <% fields_for @node.draft do |d| %>
  <p>
    <%= d.label :title %><br />
    <%= d.text_field :title %>
  </p>
  <p>
    <%= d.label :abstract %><br />
    <%= d.text_area :abstract %>
  </p>
  <p>
    <%= d.label :body %><br />
    <%= d.text_area :body %>
  </p>
  <% end %>
  
  <% else %>
  
  <p>Page is locked</p>
  
  <% end %>
  <p>
    <%= f.submit "Update" %>
  </p>
<% end %>

<%= link_to 'Show', @page %> |
<%= link_to 'Back', pages_path %>
